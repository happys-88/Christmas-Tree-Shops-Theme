require(["modules/jquery-mozu","hyprlive","underscore","modules/api","modules/backbone-mozu","shim!vendor/jquery/owl.carousel.min[jQuery=jquery]"],function(e,t,i,n,o){var r=o.MozuModel.extend({mozuType:"categories"}),a=null,u=o.MozuModel.extend({}),c=[],s=o.MozuView.extend({templateName:"widgets/homepage/home-category-tiled-view",initialize:function(){this.onloadImageHeight()},onloadImageHeight:function(){this.$el.find("img.mz-home-cat-image").one("load",function(){var t=e(this).height();c.push(t)})},render:function(){o.MozuView.prototype.render.apply(this,arguments),this.onloadImageHeight()}}),d=o.View.extend({el:e(".mz-home-sub-cat-container"),initialize:function(){this.render=i.wrap(this.render,function(e){this.beforeRender(),e(),this.afterRender()}),this.render()},categoryDetails:function(){var t=[];this.$el.find("[data-mz-category-id]").each(function(){var i=e(this).data("mz-category-id");t.push(i)});var n=new r,o=[];i.each(t,function(e){var t="categoryId eq ";t+=e+" or ",o.push(t)});var a=o.toString().replace(/,/g,""),c=a.replace(/"/g,""),d=c.substring(0,c.length-4);n.set("filter",d),n.fetch().then(function(n){i.each(t,function(t){var o=i.where(n.apiModel.data.items,{categoryId:t});1===o.length&&(o=o[0]);var r=new u(o),a=e(".category-image-"+t),c=new s({el:a,model:r});c.render()})});var h=require.mozuData("pagecontext");if(h.isDesktop){var l=e(".mz-home-sub-cat-container").find(".cat-section").length;e(".mz-home-sub-cat-container").find(".cat-section").css("width",100/l+"%")}},sliderFunction:function(){a=e("#owl-slider"),a.owlCarousel({loop:!0,autoplay:!1,autoplayTimeout:1500,navigation:!0,items:4,touchDrag:!0})},render:function(){return this},beforeRender:function(){this.categoryDetails()},afterRender:function(){this.sliderFunction();this.trigger("catHeight"),e(window).trigger("resize")}});e(document).ready(function(){new d})});