define(["modules/backbone-mozu","hyprlive","hyprlivecontext","modules/jquery-mozu","underscore","modules/editable-view","modules/api"],function(e,a,n,c,o,r,l){var d=r.extend({templateName:"modules/giftcard/check-gc-balance-form",autoUpdate:["gcNumber"],renderOnChange:["balance","balanceSuccess","balanceError"],checkGCBalance:function(){var e=this;e.model.set("balanceError",!1),e.model.set("balanceSuccess",!1);var a=e.model.validate();if(!a){e.model.isLoading(!0);var n=e.model.get("gcNumber"),c=l.context.getServiceUrls().creditService+n;l.request("GET",c).then(function(a){e.model.set("balance",a.currentBalance),e.model.set("balanceSuccess",!0),e.model.set("balanceError",!1),e.model.isLoading(!1)},function(){e.model.set("balanceError",!0),e.model.set("balanceSuccess",!1),e.model.isLoading(!1)})}},render:function(){e.MozuView.prototype.render.apply(this)}});c(document).ready(function(){var n=e.MozuModel.extend({validation:{gcNumber:[{required:!0,msg:a.getLabel("gcMissing")},{pattern:"digits",msg:a.getLabel("gcInvalid")}]}}),o=window.gcBalanceModel=new n,r=c("#gc-balance-form-container"),l=c("#gc-balance-form-messages"),t=new d({el:r,model:o,messagesEl:l});window.gcBalanceForm=t,t.render()})});