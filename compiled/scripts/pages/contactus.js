define(["modules/api","modules/backbone-mozu","underscore","modules/jquery-mozu","hyprlivecontext","hyprlive","modules/block-ui","modules/editable-view"],function(e,t,s,o,i,a,r,n){var l=n.extend({templateName:"modules/contact-us/contact-us",autoUpdate:["firstname","lastname","email","message","selectedTopic"],setError:function(e){this.model.set("isLoading",!1),this.trigger("error",{message:e||"Something went wrong!! Please try after sometime!"})},contactUsSubmit:function(){var e=this,t=e.model.get("firstname"),s=e.model.get("lastname"),a=e.model.get("email"),r=e.model.get("selectedTopic"),n=e.model.get("message");if(e.model.validate())e.setError("Invalid form submission");else{var l=i.locals.themeSettings.brontoUrl;""!==l?o.ajax({method:"POST",url:"/email/send",data:{firstName:t,lastName:s,usageType:"1",email:a,topic:r,message:n}}).success(function(t){e.model.set("isLoading",!1),e.trigger("success",{message:"We have received your request! We will get back with you shortly!"}),window.console.log(t),window.setTimeout(function(){e.render()},5e3)}).error(function(){e.setError()}):e.setError()}e.model.set("isLoading",!0)},render:function(){t.MozuView.prototype.render.apply(this)}}),m={email:{required:!0,pattern:"email",msg:a.getLabel("emailMissing")},selectedTopic:{required:!0,msg:a.getLabel("selectedMissing")},message:{required:!0,msg:a.getLabel("contactUsMessageMissing")}};i.locals.themeSettings.enableCaptcha&&s.extend(m,{recaptcha_widget_div:{required:function(){return void 0===window.recaptchaResponse},msg:a.getLabel("captchaStatusMessage")}});var d=t.MozuModel.extend({validation:m}),c=o("#contactus-container"),u=window.view=new l({el:c,model:new d({selectTopic:require.mozuData("selectTopic")})});u.render()});